name: Print Software Versions

on: [push]

jobs:
  # 1. Робота: Виведення версій ПЗ Рівня Обробки (Успішно)
  PrintSoftwareVersions:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Print Node.js Version
        run: node --version
      - name: Print Python Version
        run: python --version

  # 2. Робота: Виведення версій СКБД (Фінальне спрощення)
  PrintDBMSVersions:
    runs-on: ubuntu-latest
    needs: [PrintSoftwareVersions]
    steps:
      - uses: actions/checkout@v4
      
      # Оновлення системи для коректного встановлення
      - name: System Update
        run: sudo apt-get update
        
      # Чиста установка PostgreSQL Client 
      - name: Install PostgreSQL Client
        run: sudo apt-get install -y postgresql-client
        
      - name: Print PostgreSQL Version
        run: psql --version
        
      # Чиста установка MongoDB Client (використовуємо інший пакет)
      - name: Install MongoDB Client Shell
        run: sudo apt-get install -y mongodb-org-shell || echo "MongoDB Shell not available via apt, skipping install."
        
      - name: Print MongoDB Version
        run: mongo --version || echo "MongoDB version check failed (Package not found or service error)"
        
      - name: Successful Finish Marker
        run: echo "Successfully finished all attempts to check database versions."
